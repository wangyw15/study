# 第四周实验报告

# 1. 在E表中修改08305001课程的平时成绩，若成绩小于等于75分时提高5%，若成绩大于75分时提高4%。

## 修改前

```sql
select * from e where kh == '08305001' and pscj is not NULL;
```

|  xh  |      xq      |    kh    | gh  | pscj | kscj | zpcj |
|------|--------------|----------|-----|------|------|------|
| 1101 | 2012-2013 秋季 | 08305001 | 103 | 60.0 | 60.0 | 60.0 |
| 1102 | 2012-2013 秋季 | 08305001 | 103 | 87.0 | 87.0 | 87.0 |
| 1103 | 2012-2013 秋季 | 08305001 | 103 | 56.0 | 56.0 | 56.0 |
| 1104 | 2012-2013 秋季 | 08305001 | 103 | 74.0 | 74.0 | 74.0 |
| 1106 | 2012-2013 秋季 | 08305001 | 103 | 85.0 | 85.0 | 85.0 |
| 1107 | 2012-2013 秋季 | 08305001 | 103 | 90.0 | 90.0 | 90.0 |

## 修改后

```sql
update e set pscj = case
    when pscj <= 75 then pscj * 1.05
    else pscj * 1.04
end;
```

|  xh  |      xq      |    kh    | gh  | pscj  | kscj | zpcj |
|------|--------------|----------|-----|-------|------|------|
| 1101 | 2012-2013 秋季 | 08305001 | 103 | 63.0  | 60.0 | 60.0 |
| 1102 | 2012-2013 秋季 | 08305001 | 103 | 90.48 | 87.0 | 87.0 |
| 1103 | 2012-2013 秋季 | 08305001 | 103 | 58.8  | 56.0 | 56.0 |
| 1104 | 2012-2013 秋季 | 08305001 | 103 | 77.7  | 74.0 | 74.0 |
| 1106 | 2012-2013 秋季 | 08305001 | 103 | 88.4  | 85.0 | 85.0 |
| 1107 | 2012-2013 秋季 | 08305001 | 103 | 93.6  | 90.0 | 90.0 |

# 2. 删除没有开课的学院。

## 查询未开课的学院

```sql
select * from d where d.yxh not in (
    select distinct yxh from c where c.kh in (
        select kh from e
    )
);
```

| yxh |  mc  |    dz    |   lxdh   |
|-----|------|----------|----------|
| 3   | 材料学院 | 上大东校区四号楼 | 65347890 |

## 删除未开课的学院

### 删除前

```sql
select * from d;
```

| yxh |  mc   |    dz    |   lxdh   |
|-----|-------|----------|----------|
| 1   | 计算机学院 | 上大东校区三号楼 | 65347567 |
| 2   | 通讯学院  | 上大东校区二号楼 | 65341234 |
| 3   | 材料学院  | 上大东校区四号楼 | 65347890 |

### 删除后

```sql
delete from d where d.yxh not in (
    select distinct yxh from c where c.kh in (
        select kh from e
    )
);
```

| yxh |  mc   |    dz    |   lxdh   |
|-----|-------|----------|----------|
| 1   | 计算机学院 | 上大东校区三号楼 | 65347567 |
| 2   | 通讯学院  | 上大东校区二号楼 | 65341234 |

# 3. 对school数据库，小组设计教务管理系统，此题延续到学期结束。
